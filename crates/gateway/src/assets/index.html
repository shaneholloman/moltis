<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="color-scheme" content="dark light">
<title>moltis</title>
<link rel="stylesheet" href="/assets/style.css">
</head>
<body>

<!-- Top bar -->
<header class="flex items-center gap-3 px-4 py-2.5 border-b border-[var(--border)] bg-[var(--surface)] shrink-0">
  <button id="burgerBtn" class="burger-btn" title="Navigation">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="20" height="20"><path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/></svg>
  </button>
  <h1 class="text-base font-medium tracking-wide text-[var(--text-strong)]">moltis</h1>
  <span class="status-dot" id="statusDot"></span>
  <span class="text-xs text-[var(--muted)]" id="statusText">disconnected</span>
  <div class="flex-1"></div>

  <!-- Theme toggle -->
  <div class="theme-toggle" id="themeToggle">
    <button class="theme-btn" data-theme-val="light" title="Light theme">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72 1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
    </button>
    <button class="theme-btn" data-theme-val="system" title="System theme">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8m-4-4v4"/></svg>
    </button>
    <button class="theme-btn" data-theme-val="dark" title="Dark theme">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75 9.75 9.75 0 0 1 8.25 6c0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25 9.75 9.75 0 0 0 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"/></svg>
    </button>
  </div>

</header>

<!-- Main layout -->
<div class="flex flex-1 overflow-hidden">
  <!-- Navigation panel -->
  <nav id="navPanel" class="nav-panel">
    <div class="flex-1 flex flex-col py-1">
      <a href="/" data-nav class="nav-link active" style="display:flex;align-items:center;gap:8px">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.3 48.3 0 0 0 5.862-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.4 48.4 0 0 0 12 3a48.4 48.4 0 0 0-5.775.514C4.623 3.746 3.5 5.14 3.5 6.74v6.009Z"/></svg>
        Chat
      </a>
      <a href="/crons" data-nav class="nav-link" style="display:flex;align-items:center;gap:8px">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
        Crons
      </a>
      <a href="/methods" data-nav class="nav-link" style="display:flex;align-items:center;gap:8px">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"/></svg>
        Methods
      </a>
      <a href="/projects" data-nav class="nav-link" style="display:flex;align-items:center;gap:8px">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"/></svg>
        Projects
      </a>
      <a href="/providers" data-nav class="nav-link" style="display:flex;align-items:center;gap:8px">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 0 0-3 3m3-3h12.75a3 3 0 0 1-3-3m3 3a3 3 0 0 0 3 3m-3-6a3 3 0 0 1-3-3m0 0a3 3 0 0 1 3-3m-3 3h-12.75a3 3 0 0 1 3 3m-3-3a3 3 0 0 0-3 3m0 0h.008v.008H2.25v-.008Zm0 6h.008v.008H2.25v-.008ZM21.75 8.25h.008v.008h-.008v-.008Zm0 6h.008v.008h-.008v-.008Z"/></svg>
        Providers
      </a>
      <a href="/channels" data-nav class="nav-link" style="display:flex;align-items:center;gap:8px">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"/></svg>
        Channels
      </a>
      <a href="/logs" data-nav class="nav-link" id="navLogs" style="display:flex;align-items:center;gap:8px;position:relative">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"/></svg>
        Logs
        <span id="logsAlertDot" style="display:none;width:7px;height:7px;border-radius:50%;background:var(--warn);position:absolute;top:8px;right:8px"></span>
      </a>
    </div>
  </nav>

  <!-- Sessions sidebar -->
  <div class="w-[240px] border-r border-[var(--border)] flex flex-col bg-[var(--surface)] shrink-0 hidden" id="sessionsPanel">
    <div class="px-3 py-2.5 border-b border-[var(--border)] flex items-center justify-between">
      <span class="text-sm text-[var(--muted)] font-medium">Sessions</span>
      <button id="newSessionBtn" class="text-xs text-[var(--muted)] border border-[var(--border)] px-2 py-0.5 rounded hover:text-[var(--text)] hover:border-[var(--border-strong)] transition-colors cursor-pointer bg-transparent">+ New</button>
    </div>
    <!-- Project selector -->
    <div class="px-3 py-2 border-b border-[var(--border)] flex items-center gap-2">
      <select id="projectSelect" class="flex-1 text-xs bg-[var(--surface2)] border border-[var(--border)] rounded px-2 py-1.5 text-[var(--text)] focus:outline-none focus:border-[var(--border-strong)] cursor-pointer" style="font-family:var(--font-body)">
        <option value="">No project</option>
      </select>
      <button id="manageProjectsBtn" class="text-xs text-[var(--muted)] border border-[var(--border)] px-2 py-0.5 rounded hover:text-[var(--text)] hover:border-[var(--border-strong)] transition-colors cursor-pointer bg-transparent" title="Manage projects">+</button>
    </div>
    <div class="px-3 py-2 border-b border-[var(--border)]" style="position:relative">
      <input id="sessionSearch" type="text" placeholder="Search sessionsâ€¦"
             class="w-full text-xs bg-[var(--surface2)] border border-[var(--border)] rounded px-2 py-1.5 text-[var(--text)] focus:outline-none focus:border-[var(--border-strong)]" style="font-family:var(--font-body)" />
      <div id="searchResults" class="hidden"></div>
    </div>
    <div class="flex-1 overflow-y-auto" id="sessionList"></div>
  </div>

  <!-- Page content (swapped by router) -->
  <div id="pageContent" class="flex-1 flex min-w-0"></div>
</div>

<!-- Provider modal -->
<div id="providerModal" class="provider-modal-backdrop hidden">
  <div class="provider-modal">
    <div class="provider-modal-header">
      <span class="text-sm font-medium text-[var(--text-strong)]" id="providerModalTitle">Add Provider</span>
      <button id="providerModalClose" class="text-[var(--muted)] hover:text-[var(--text)] cursor-pointer bg-transparent border-none text-lg leading-none">&times;</button>
    </div>
    <div class="provider-modal-body" id="providerModalBody">
      <!-- Populated by JS -->
    </div>
  </div>
</div>

<!-- Channel modal -->
<div id="channelModal" class="provider-modal-backdrop hidden">
  <div class="provider-modal">
    <div class="provider-modal-header">
      <span class="text-sm font-medium text-[var(--text-strong)]" id="channelModalTitle">Add Channel</span>
      <button id="channelModalClose" class="text-[var(--muted)] hover:text-[var(--text)] cursor-pointer bg-transparent border-none text-lg leading-none">&times;</button>
    </div>
    <div class="provider-modal-body" id="channelModalBody">
      <!-- Populated by JS -->
    </div>
  </div>
</div>

<!-- Project modal -->
<div id="projectModal" class="provider-modal-backdrop hidden">
  <div class="provider-modal">
    <div class="provider-modal-header">
      <span class="text-sm font-medium text-[var(--text-strong)]" id="projectModalTitle">Manage Projects</span>
      <button id="projectModalClose" class="text-[var(--muted)] hover:text-[var(--text)] cursor-pointer bg-transparent border-none text-lg leading-none">&times;</button>
    </div>
    <div class="provider-modal-body" id="projectModalBody">
      <!-- Project list populated by JS -->
    </div>
  </div>
</div>

<script src="/assets/app.js"></script>
</body>
</html>
